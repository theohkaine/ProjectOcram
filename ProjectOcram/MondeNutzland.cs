//-----------------------------------------------------------------------
// <copyright file="MondeNutzland.cs" company="Marco Lavoie">
// Marco Lavoie, 2010-2016. Tous droits réservés
// 
// L'utilisation de ce matériel pédagogique (présentations, code source 
// et autres) avec ou sans modifications, est permise en autant que les 
// conditions suivantes soient respectées:
//
// 1. La diffusion du matériel doit se limiter à un intranet dont l'accès
//    est imité aux étudiants inscrits à un cours exploitant le dit 
//    matériel. IL EST STRICTEMENT INTERDIT DE DIFFUSER CE MATÉRIEL 
//    LIBREMENT SUR INTERNET.
// 2. La redistribution des présentations contenues dans le matériel 
//    pédagogique est autorisée uniquement en format Acrobat PDF et sous
//    restrictions stipulées à la condition #1. Le code source contenu 
//    dans le matériel pédagogique peut cependant être redistribué sous 
//    sa forme  originale, en autant que la condition #1 soit également 
//    respectée.
// 3. Le matériel diffusé doit contenir intégralement la mention de 
//    droits d'auteurs ci-dessus, la notice présente ainsi que la
//    décharge ci-dessous.
// 
// CE MATÉRIEL PÉDAGOGIQUE EST DISTRIBUÉ "TEL QUEL" PAR L'AUTEUR, SANS 
// AUCUNE GARANTIE EXPLICITE OU IMPLICITE. L'AUTEUR NE PEUT EN AUCUNE 
// CIRCONSTANCE ÊTRE TENU RESPONSABLE DE DOMMAGES DIRECTS, INDIRECTS, 
// CIRCONSTENTIELS OU EXEMPLAIRES. TOUTE VIOLATION DE DROITS D'AUTEUR 
// OCCASIONNÉ PAR L'UTILISATION DE CE MATÉRIEL PÉDAGOGIQUE EST PRIS EN 
// CHARGE PAR L'UTILISATEUR DU DIT MATÉRIEL.
// 
// En utilisant ce matériel pédagogique, vous acceptez implicitement les
// conditions et la décharge exprimés ci-dessus.
// </copyright>
//-----------------------------------------------------------------------

namespace ProjectOcram
{
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Text;
    using System.Threading.Tasks;

    using IFM20884;

    using Microsoft.Xna.Framework;
    using Microsoft.Xna.Framework.Content;
    using Microsoft.Xna.Framework.Graphics;

    /// <summary>
    /// Concrétisation d'un monde de tuiles.
    /// </summary>
    public class MondeNutzland : MondeDeTuiles
    {
        /// <summary>
        /// Attribut stockant la palette de tuiles exploitée par toutes les instances.
        /// </summary>
        private static Palette paletteDeTuiles = null;       // palette de tuiles constituant le monde

        /// <summary>
        /// Palette de tuiles permettant de gérer les collisions des sprites avec les tuiles.
        /// </summary>
        private static Palette paletteDeCollisions = null;

        /// <summary>
        /// Mappe monde : chaque valeur du tableau correspond à l'index d'une tuile dans mondeDeTuiles.
        /// </summary>
        private static int[,] mappeMonde = 
                 {
                  { 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101,
                    101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101,
                    101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101,
                    101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101 },
                  { 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101,  0,  1, 101, 101, 101, 101, 101, 101, 101,
                    101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101,  2,  3,  4, 101, 101, 101, 101, 101, 101, 101, 101, 101,
                    101, 101, 101, 101, 101,  5,  6,  7, 101, 101, 101, 101, 101, 101, 101,  8,  9, 101, 101, 101, 101, 101, 101, 101, 101,
                    101, 101, 101, 101, 101, 101, 101, 101, 101, 101,  0,  1, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101 },
                  { 101, 101,  5,  6,  7, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101,
                    101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101,
                    101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101,  8,
                    3,  4, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101 },
                  { 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101,
                    101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101,  8,  9, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101,
                    101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101,
                    101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101 },
                  { 101, 101, 101, 101, 101, 101,  2,  3,  4, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101,
                    101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 10, 11, 101, 101, 101, 101, 101, 101, 101, 101,
                    101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101,
                    101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101,  0,  1, 101, 101, 101 },
                  { 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101,
                    101, 101, 101,  0,  1, 101, 101, 101, 101, 101, 101, 101, 101, 101, 12, 13, 14, 15, 101, 101, 101, 101, 101, 101, 101,
                    8,  9, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101,
                    101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101 },
                  { 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101,
                    101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 16, 17, 18, 19, 101, 101, 101, 101, 101, 101, 101,
                    101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101,  0,  1, 101, 101, 101,
                    101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 20, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101 },
                  { 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101,
                    101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 21, 22, 101, 101, 101, 101, 101, 101, 101, 101,
                    101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101,
                    101, 101, 101, 101, 101, 101, 101, 101, 101, 23, 24, 25, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101 },
                  { 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101,
                    101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 21, 26, 27, 27, 28, 101, 101, 101, 101, 101,
                    101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101,
                    101, 101, 101, 101, 101, 101, 101, 101, 101, 29, 30, 31, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101 },
                  { 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101,
                    101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 21, 22, 101, 101, 101, 101, 101, 101, 101, 101,
                    101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101,
                    101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 32, 101, 101,  5,  6,  7, 101, 101, 101, 101, 101, 101, 101, 101, 101 },
                  { 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 33, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101,
                    101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 20, 101, 21, 22, 101, 101, 101, 101, 101, 101, 101, 101,
                    101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101,
                    101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 32, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101 },
                  { 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 35, 101, 101, 101, 101, 101, 101, 101, 101, 101, 34, 101, 101, 101, 101,
                    101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 39, 40, 41, 22, 101, 101, 101, 101, 101, 101, 101, 101,
                    101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 42, 43, 101, 101, 101, 101,
                    101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 32, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101 },
                  { 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 44, 101, 101, 101, 101, 101, 101, 101, 101, 36, 37, 38, 101, 101, 101,
                    101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 21, 22, 101, 101, 101, 101, 101, 101, 101, 101,
                    101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 36, 37, 37, 48, 37, 37, 48, 37, 38,
                    101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 32, 101, 101, 101, 101, 101, 101, 49, 50, 101, 101, 101, 101, 101, 101 },
                  { 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 51, 101, 101, 101, 101, 101, 101, 52, 101, 45, 46, 47, 101, 101, 101,
                    101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 21, 26, 27, 28, 101, 101, 101, 101, 101, 101,
                    101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 45, 53, 53, 53, 53, 53, 53, 53, 47,
                    101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 32, 101, 101, 101, 54, 55, 101, 56, 56, 101, 101, 101, 101, 101, 101 },
                  { 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 35, 101, 101, 101, 101, 101, 36, 57, 38, 45, 46, 47, 101, 101, 101,
                    101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 58, 27, 21, 22, 101, 101, 101, 101, 101, 101, 101, 59,
                    60, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 45, 61, 62, 53, 53, 63, 53, 53, 64,
                    64, 64, 101, 101, 101, 101, 101, 101, 101, 101, 32, 101, 101, 101, 65, 66, 67, 68, 68, 101, 101, 101, 101, 101, 101 },
                  { 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 51, 101, 101, 101, 101, 101, 45, 46, 47, 45, 46, 47, 101, 101, 101,
                    101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 21, 22, 65, 66, 69, 69, 70, 69, 67, 41,
                    21, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 45, 53, 53, 61, 61, 61, 53, 53, 71,
                    71, 64, 64, 64, 101, 101, 101, 101, 101, 101, 32, 101, 101, 101, 101, 101, 101, 72, 72, 101, 101, 101, 101, 101, 101 },
                  { 73, 101, 101, 101, 101, 101, 101, 101, 101, 101, 51, 101, 101, 36, 57, 38, 45, 46, 47, 45, 46, 47, 101, 101, 101,
                    74, 75, 101, 101, 101, 101, 101, 101, 101, 101, 101, 101, 76, 77, 101, 21, 22, 101, 101, 101, 101, 101, 101, 101, 78,
                    21, 79, 101, 101, 101, 101, 101, 101, 101, 101, 80, 81, 101, 101, 101, 101, 45, 53, 82, 53, 53, 53, 83, 53, 71,
                    71, 71, 62, 64, 64, 64, 101, 101, 101, 101, 32, 101, 101, 101, 101, 101, 101, 68, 68, 101, 101, 101, 84, 85, 101 },
                  { 37, 86, 48, 38, 101, 101, 101, 101, 101, 101, 35, 101, 101, 45, 46, 47, 45, 46, 47, 45, 46, 47, 101, 101, 101,
                    87, 88, 89, 46, 90, 91, 90, 91, 90, 46, 92, 101, 87, 88, 101, 21, 22, 93, 52, 94, 94, 94, 94, 94, 78,
                    21, 94, 94, 94, 94, 94, 94, 101, 101, 101, 87, 88, 101, 101, 95, 101, 45, 53, 53, 53, 53, 96, 53, 53, 71,
                    63, 71, 71, 71, 71, 64, 64, 64, 101, 101, 32, 101, 101, 101, 101, 101, 101, 68, 68, 101, 101, 101, 87, 101, 101 },
                  { 97, 97, 97, 97, 97, 97, 97, 97, 97, 97, 97, 97, 97, 97, 97, 97, 97, 97, 97, 97, 97, 97, 97, 97, 97, 
                    97, 97, 97, 97, 97, 97, 97, 97, 97, 97, 97, 97, 97, 97, 97, 97, 97, 97, 97, 97, 97, 97, 97, 97, 97, 
                    97, 97, 97, 97, 97, 97, 97, 97, 97, 97, 97, 97, 97, 97, 97, 97, 97, 97, 97, 97, 97, 97, 97, 97, 97, 
                    97, 97, 97, 97, 97, 97, 97, 97, 97, 97, 97, 97, 97, 97, 97, 97, 97, 68, 68, 97, 97, 97, 97, 97, 98 }, 
                  { 98, 98, 98, 98, 98, 98, 98, 98, 98, 98, 98, 98, 98, 98, 98, 98, 98, 98, 98, 98, 98, 98, 98, 98, 98, 
                    98, 98, 98, 98, 98, 98, 98, 98, 98, 98, 98, 98, 98, 98, 98, 98, 98, 98, 98, 98, 98, 98, 98, 98, 98, 
                    98, 98, 98, 98, 98, 98, 98, 98, 98, 98, 98, 98, 98, 98, 98, 98, 98, 98, 98, 98, 98, 98, 98, 98, 98, 
                    98, 98, 98, 99, 99, 99, 99, 99, 98, 98, 98, 98, 98, 98, 98, 98, 98, 100, 100, 98, 98, 98, 98, 98, 99 }
                  };

        /// <summary>
        /// Accesseur surchargé retournant la palette contenant les tuiles du monde.
        /// </summary>
        protected override Palette PaletteDeTuiles    // palette des tuiles constituant le monde
        {
            get { return paletteDeTuiles;  }
        }

        /// <summary>
        /// Propriété (accesseur de paletteDeCollisions) retournant la palette de gestion des collisions
        /// de sprites avec les tuiles (peut être nul).
        /// </summary>
        /// <value>Palette de gestion des collisions de sprites avec les tuiles.</value>
        protected override Palette PaletteDeCollisions
        {
            get { return paletteDeCollisions; }
        }

        /// <summary>
        /// Accesseur surchargé retournant la matrice de numéros de tuiles du monde.
        /// </summary>
        protected override int[,] MappeMonde          // tableau d'index des tuiles du monde
        {
            get { return mappeMonde; }
        }

        /// <summary>
        /// Charge la texture contenant la palette de tuiles.
        /// </summary>
        /// <param name="content">Gestionnaire de contenu permettant de charger les textures.</param>
        public static void LoadContent(ContentManager content)
        {
            paletteDeTuiles = new Palette(content.Load<Texture2D>(@"Monde\TuilesMonde"), 32, 32);
            paletteDeCollisions = new Palette(content.Load<Texture2D>(@"Monde\TuilesMondeCollisions"), 32, 32);
        }
    }
}
